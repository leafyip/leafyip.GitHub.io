---
title: JVM内存模型
date: 2020-08-24 20:15:18
tags: jvm
---

JVM运行时数据区主要包含以下区域 程序计数器,JAVA堆,虚拟机(JAVA)栈,方法区(元空间),本地方法栈
 
 其中
 - 线程共享 : 方法区,JAVA堆
 - 线程私有 : 程序计数器,本地方法栈,JAVA栈    
  
![Alt text](/images/jvm-area.png)
   
<!--more-->
## 1 程序计数器
+ 程序计数器:线程私有,一块较小的内存空间,记录当前线程所执行的字节码的行号指示器.此内存区域是唯一一个在Java虚拟机规范中没有OutOfMemoryError的区域.  


## 2 虚拟机栈(JAVA栈)

- 虚拟机栈与程序计数器一样,属于**线程私有**的,生命周期与线程相同.
- 每一个方法执行都会创建一个栈帧,用于存储**局部变量表**,**操作数栈**,**动态链接**,**方法出口**等信息
- 每一个方法从调用直至执行完成的过程,实际就对应着一个栈帧从虚拟机栈**入栈到出栈**的过程

## 3 本地方法栈
本地方法栈和虚拟机栈类似,只不过虚拟机栈执行的是java方法,本地方法栈执行本地native方法.

## 4 JAVA堆
JAVA堆是JAVA虚拟机所管理内存最大的一块,也是垃圾收集器管理的主要区域.
按照分代垃圾回收算法,JAVA堆可细分为新生代和老年代,默认比例 1 : 2
新生代又可分为伊甸区Eden,from survivor , to survivor 区,默认比例8 : 1 : 1

## 5 方法区
方法区用于存储已被虚拟机加载的类常量,静态常量,即时编译器编译后的代码数据